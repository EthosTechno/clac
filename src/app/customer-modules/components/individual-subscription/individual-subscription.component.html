<div class="individual-subscription-wrapper">
    <div class="side-wrapper">
        <div class="side-graphics d-flex justify-content-center">
            <div class="d-flex flex-column justify-content-center side-content">
                <h2 class="mb-4">You are one step away from <span>joining the Clac community!</span></h2>
            </div>
            <div class="side-human-graphics"></div>
        </div>
    </div>

    <div class="mobile-content">
        <div class="container">
            <h2 class="my-4">You are one step away from <span>joining the Clac community!</span></h2>
        </div>
    </div>

    <div class="subscription-stepper pt-3">
        <div class="container">
            <div class="stepper-main">
                <div id="stepper1" class="bs-stepper">
                    <div class="bs-stepper-header">
                        <div class="step" data-target="#step-1">
                            <button class="step-trigger">
                                <span class="bs-stepper-label">1. Your subscription</span>
                            </button>
                        </div>
                        <div class="step" data-target="#step-2">
                            <button class="step-trigger"
                                [disabled]="PlanDetails?._id == '' || PlanDetails?._id == undefined">
                                <span class="bs-stepper-label">2. Personal Info</span>
                            </button>
                        </div>
                        <div class="step" data-target="#step-3">
                            <button class="step-trigger"
                                [disabled]="first_name.invalid || last_name.invalid || conform_password.invalid || password.invalid ||
                            user_name.invalid || birthdate.invalid || reference_source.invalid || country_code.invalid || mobile_no.invalid || email.invalid">
                                <span class="bs-stepper-label">3. Means of payment</span>
                            </button>
                        </div>
                        <div class="step" data-target="#step-4">
                            <button class="step-trigger"
                                [disabled]="PlanDetails?._id == '' || PlanDetails?._id == undefined || first_name.invalid || last_name.invalid || conform_password.invalid || password.invalid ||
                            user_name.invalid || birthdate.invalid || reference_source.invalid || country_code.invalid || mobile_no.invalid || email.invalid">
                                <span class="bs-stepper-label">4. Confirmation</span>
                            </button>
                        </div>
                    </div>

                    <div class="bs-stepper-content">
                        <!-- <form #indivisualSubForm="ngForm" (ngSubmit)="indivisualSubForm.form.valid && submit()"> -->
                        <form #indivisualSubForm="ngForm" [mustMatch]="['password', 'conform_password']">
                            <!-- [mustMatch]="['password', 'conform_password']" -->
                            <div id="step-1" class="content">
                                <div class="row mb-4">
                                    <div class="col-6"
                                        *ngFor="let indivisualSubType of indivisualSubDetailData; let i=index">
                                        <div class="form-group">
                                            <input type="radio" class="select-plan" id="selectPlan1{{i}}"
                                                value="{{indivisualSubType._id}}" ngModel
                                                (click)="passPlanData(indivisualSubType)"
                                                [(ngModel)]="indivisualSubDetail.subscription_plan_id" required
                                                #subscription_plan_id="ngModel" name="subscription_plan_id">
                                            <label for="selectPlan1{{i}}" class="plan">
                                                <div class="plan-detail-wrapper">
                                                    <h5>{{indivisualSubType.subscription_title}}</h5>
                                                    <h2>{{indivisualSubType.amount}}<span>€ {{indivisualSubType.tax}} /
                                                            {{indivisualSubType.type}}</span></h2>
                                                    <p class="plan-detail">{{indivisualSubType.subscription_sub_title}}
                                                    </p>
                                                    <P>{{indivisualSubType.description}}</P>
                                                    <div class="selected-offer">My choice</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="line"></div>
                                <div class="d-flex justify-content-end mt-4">
                                    <!-- <button (click)="previous()" [disabled]="true"
                                        class="btn btn-primary">Previous</button> -->
                                    <button (click)="next()" class="btn btn-primary"
                                        [disabled]="PlanDetails?._id == '' || PlanDetails?._id == undefined">Following</button>
                                </div>
                            </div>
                            <div id="step-2" class="content">
                                <form (keydown.enter)="false">
                                <div class="row mb-4">
                                    <div class="col-6">
                                        <div class="form-group mb-1">
                                            <label for="first_name" class="form-label">First name<span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="first_name" name="first_name" class="form-control"
                                                #first_name="ngModel" ngModel pattern="^[a-zA-Z ]+$" required
                                                autocomplete="off" [(ngModel)]="indivisualSubDetail.first_name"
                                                [ngClass]="{'is-invalid':(first_name.invalid && first_name.touched),
                                                'is-valid':(first_name.valid && first_name.touched)}">
                                            <div class="invalid-feedback"
                                                *ngIf="(first_name.invalid && (first_name.dirty || first_name.touched ))">
                                                <div *ngIf="first_name.errors?.['required']" class="red-color">
                                                    First Name is required.
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group mb-1">
                                            <label for="last_name" class="form-label">Last name <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="last_name" name="last_name" class="form-control"
                                                #last_name="ngModel" ngModel pattern="^[a-zA-Z ]+$" required
                                                autocomplete="off" [(ngModel)]="indivisualSubDetail.last_name"
                                                [ngClass]="{'is-invalid':(last_name.invalid && last_name.touched),
                                                'is-valid':(last_name.valid && last_name.touched)}">
                                            <div *ngIf="(last_name.invalid && (last_name.dirty || last_name.touched ))"
                                                class="invalid-feedback">
                                                <div *ngIf="last_name.errors?.['required']" class="red-color">
                                                    Last Name is required.
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group mb-1">
                                            <label for="user_name" class="form-label">User name <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="user_name" name="user_name" class="form-control"
                                                #user_name="ngModel" (keydown.space)="$event.preventDefault()"
                                                pattern="^[a-zA-Z]([._-](?![._-])|[a-zA-Z0-9]){1,18}[a-zA-Z0-9]$"
                                                ngModel required autocomplete="off"
                                                [(ngModel)]="indivisualSubDetail.user_name" [ngClass]="{'is-invalid':(user_name.invalid && user_name.touched),
                                                'is-valid':(user_name.valid && user_name.touched)}">
                                            <div *ngIf="(user_name.invalid && (user_name.dirty || user_name.touched ))"
                                                class="invalid-feedback">
                                                <div *ngIf="user_name.errors?.['required']" class="red-color">
                                                    User Name is required.
                                                </div>
                                                <div *ngIf="user_name.errors?.['pattern']" class="red-color">
                                                    User Name is invalid.
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group mb-1">
                                            <label for="birthdate" class="form-label"> Birth Date <span
                                                    class="text-danger">*</span></label>
                                            <input type="date" id="birthdate" name="birthdate" class="form-control"
                                                [ngClass]="{'is-invalid':(birthdate.invalid && birthdate.touched),
                                            'is-valid':(birthdate.valid && birthdate.touched)}" #birthdate="ngModel"
                                                ngModel required autocomplete="off" max="{{bodMinDate}}"
                                                [(ngModel)]="indivisualSubDetail.birthdate">
                                            <div class="invalid-feedback"
                                                *ngIf="(birthdate.invalid && (birthdate.dirty || birthdate.touched))">
                                                <div *ngIf="birthdate.errors?.['required']" class="fv-help-block">
                                                    Birthdate is required
                                                </div>
                                                <!-- <div *ngIf="birthdate.errors?.pattern" class="fv-help-block">
                                                    Birthdate is invalid
                                                </div> -->
                                            </div>
                                        </div>

                                        <div class="form-group mb-1">
                                            <label for="reference_source" class="form-label">How did you know us? <span
                                                    class="text-danger">*</span></label>
                                            <select id="reference_source" class="form-control"
                                                #reference_source="ngModel" ngModel
                                                [(ngModel)]="indivisualSubDetail.reference_source"
                                                name="reference_source" required [ngClass]="{'is-invalid':(reference_source.invalid && reference_source.touched),
                                                'is-valid':(reference_source.valid && reference_source.touched)}">
                                                <option value="undefined" disabled>Select the option that suits you
                                                </option>
                                                <option value="FACEBOOK">FACEBOOK</option>
                                                <option value="SNAPCHAT">SNAPCHAT</option>
                                                <option value="INSTAGRAM">INSTAGRAM</option>
                                                <option value="GOOGLE">GOOGLE</option>
                                            </select>
                                            <div class="invalid-feedback"
                                                *ngIf="(reference_source.invalid && (reference_source.dirty || reference_source.touched))">
                                                <div *ngIf="reference_source.errors?.['required']"
                                                    class="fv-help-block">
                                                    You must select an option
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="form-group mb-1">
                                            <label for="country_code" class="form-label"> Country Code <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="country_code" name="country_code"
                                                class="form-control" #country_code="ngModel" ngModel
                                                pattern="^\+?\d{1,4}$" (keypress)="numberOnly($event)" required
                                                autocomplete="off" [(ngModel)]="indivisualSubDetail.country_code"
                                                [ngClass]="{'is-invalid':(country_code.invalid && country_code.touched),
                                                'is-valid':(country_code.valid && country_code.touched)}">

                                            <div *ngIf="(country_code.invalid && (country_code.dirty || country_code.touched ))"
                                                class="invalid-feedback">
                                                <div *ngIf="country_code.errors?.['required']" class="red-color">
                                                    Country Code is required.
                                                </div>
                                                <div *ngIf="country_code.errors?.['pattern']" class="red-color">
                                                    Country Code is invalid.
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group mb-1">
                                            <label for="mobile_no" class="form-label"> Mobile No <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="mobile_no" name="mobile_no" class="form-control"
                                                #mobile_no="ngModel" ngModel pattern="^\+?\d{8,14}$" required
                                                autocomplete="off" [(ngModel)]="indivisualSubDetail.mobile_no"
                                                [ngClass]="{'is-invalid':(mobile_no.invalid && mobile_no.touched),
                                                'is-valid':(mobile_no.valid && mobile_no.touched)}">

                                            <div *ngIf="(mobile_no.invalid && (mobile_no.dirty || mobile_no.touched ))"
                                                class="invalid-feedback">
                                                <div *ngIf="mobile_no.errors?.['required']" class="red-color">
                                                    Mobile Number is required.
                                                </div>
                                                <div *ngIf="mobile_no.errors?.['pattern']" class="red-color">
                                                    Mobile Number is invalid.
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group mb-1">
                                            <label for="email" class="form-label"> Email <span
                                                    class="text-danger">*</span></label>
                                            <input type="email" id="email" name="email" class="form-control"
                                                #email="ngModel" ngModel required autocomplete="off"
                                                pattern="[a-zA-Z0-9.-_+]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}"
                                                [(ngModel)]="indivisualSubDetail.email" [ngClass]="{'is-invalid':(email.invalid && email.touched),
                                                'is-valid':(email.valid && email.touched)}">
                                            <div *ngIf="(email.invalid && (email.dirty || email.touched ))"
                                                class="invalid-feedback">
                                                <div *ngIf="email.errors?.['required']" class="red-color">
                                                    Email is required.
                                                </div>
                                                <div *ngIf="email.errors?.['pattern']" class="red-color">
                                                    Please enter valid email address.
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group mb-1">
                                            <label for="password" class="form-label"> Password <span
                                                    class="text-danger">*</span></label>
                                            <input type="password" id="password" name="password" class="form-control"
                                                [ngClass]="{'is-invalid':(password.invalid && password.touched),
                                            'is-valid':(password.valid && password.touched)}" #password="ngModel"
                                                ngModel required autocomplete="off"
                                                [(ngModel)]="indivisualSubDetail.password">
                                            <div *ngIf="(password.invalid && (password.dirty || password.touched ))"
                                                class="invalid-feedback">
                                                <div *ngIf="password.errors?.['required']" class="red-color">
                                                    Password is required.
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group mb-1">
                                            <label for="conform_password" class="form-label">Confirm Password <span
                                                    class="text-danger">*</span></label>
                                            <input type="password" id="conform_password" name="conform_password"
                                                class="form-control" #conform_password="ngModel" ngModel required
                                                autocomplete="off" [(ngModel)]="indivisualSubDetail.conform_password"
                                                [ngClass]="{'is-invalid':(conform_password.invalid && conform_password.touched),
                                            'is-valid':(conform_password.valid && conform_password.touched)}">
                                            <div *ngIf="(conform_password.invalid && (conform_password.dirty || conform_password.touched ))"
                                                class="invalid-feedback">
                                                <div *ngIf="conform_password.errors?.['required']" class="red-color">
                                                    Confirm Password is required.
                                                </div>
                                                <div *ngIf="conform_password.errors?.['mustMatch']" class="red-color">
                                                    Password and confirm password must be match
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                                <div class="line"></div>
                                <div class="d-flex justify-content-between mt-4">
                                    <button (click)="previous()" class="btn btn-primary">Previous</button>
                                    <button (click)="next()"
                                        [disabled]="first_name.invalid || last_name.invalid || conform_password.invalid || password.invalid ||
                                    user_name.invalid || birthdate.invalid || reference_source.invalid || country_code.invalid || mobile_no.invalid || email.invalid"
                                        class="btn btn-primary">Following</button>
                                </div>
                            </div>
                            <div id="step-3" class="content">
                                <!-- <app-card-payment (next_id)='displayTab($event)'></app-card-payment> -->
                                <div class="um-col-1 cus-registration-form">
                                    <form #checkout="ngForm" (ngSubmit)="onSubmit(checkout)" class="checkout">
                                        <div class="um-field um-field-text um-field-type_text um-field-type_source">
                                            <div class="form-row">
                                                <div id="card-info" #cardInfo></div>
                                                <div class="red-color" id="card-errors" role="alert" *ngIf="error">{{
                                                    error }}</div>
                                            </div>
                                        </div>
                                        <!-- <button type="submit" class="my-3 btn btn-primary">Pay $5</button> -->
                                    </form>
                                </div>
                                <div class="line"></div>
                                <div class="d-flex justify-content-between mt-4">
                                    <button (click)="previous()" class="btn btn-primary">Previous</button>
                                    <button (click)="onSubmit(checkout)" class="btn btn-primary">Following</button>
                                </div>
                            </div>
                            <div id="step-4" class="content">
                                <div class="my-3">
                                    <p class="m-0">That's it! thanks for your patience.</p>
                                    <p class="m-0">When you click on "Subscribe me" your account will be created and
                                        your data will be saved securely. Then you need to confirm your email address by
                                        clicking on the link that we're going to send you after that.</p>
                                </div>
                                <div class="payment-confirmation mb-4">
                                    <p class="m-0">{{PlanDetails?.amount}} € / {{PlanDetails?.type}}</p>
                                    <p class="m-0">Payment by: Stripe Card</p>
                                </div>
                                <div class="mb-4 form-check position-relative">
                                    <input type="checkbox" class="form-check-input" id="userPolicy" name="userPolicy"
                                        #userPolicy="ngModel" ngModel required>
                                    <label class="form-check-label" for="userPolicy">I'read and I accept</label><a
                                        href="javascript:;" class="ml-1" data-bs-toggle="modal"
                                        data-bs-target="#userPolicyModal">the general sales & user policies</a>
                                </div>
                                <div class="line"></div>
                                <div class="d-flex justify-content-between mt-4">

                                    <button (click)="previous()" class="btn btn-primary">Previous</button>
                                    <button (click)="submit()" [disabled]="userPolicy.invalid"
                                        class="btn btn-primary">Subscribe me</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--User policy Modal -->
    <div class="modal fade" id="userPolicyModal" tabindex="-1" aria-labelledby="userPolicyModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>User Policies</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>User policies are as following:</p>
                    <ol>
                        <li>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has
                            been the industry's standard dummy text ever since the 1500s, when an unknown printer took a
                            galley of type and scrambled it to make a type specimen book.</li>
                        <li>It has survived not only five centuries, but also the leap into electronic typesetting,
                            remaining essentially unchanged.</li>
                        <li>It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum
                            passages, and more recently with desktop publishing software like Aldus PageMaker including
                            versions of Lorem Ipsum.</li>
                        <li>It is a long established fact that a reader will be distracted by the readable content of a
                            page when looking at its layout.</li>
                        <li>Contrary to popular belief, Lorem Ipsum is not simply random text.</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</div>